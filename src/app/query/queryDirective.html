<div>

    <textarea ng-show="editable" placeholder="Query..." style="height: {{view.queryGenerator? 20 : 85}}px;" class="queryInput form-control" ng-model="view.query.q" />

    <div class="form-inline form-group" >
        <select class="form-control" style="float: right" ng-show="view.queryGenerators" ng-model="view.queryGenerator" ng-options="key for (key,value) in view.queryGenerators">
            <option value="">Query generator...</option>
        </select>
        <select  class="form-control" style="float: right;" ng-show="!view.queryGenerator && view.queryPresets" ng-model="preset" ng-options="key for (key,value) in view.queryPresets">
            <option value="">Query preset...</option>
        </select>

        <div ng-if="editable" style="float: left">
            <button class="btn btn-default" ng-click="getData()">Submit Query</button>
        </div>
        <div ng-if="view.type=='Graph' && !view.queryGenerator" style="float: left">
            <label style="margin-left: 10px;">
                <input type="checkbox" ng-model="query.connectAll" />Connect all on load
            </label>
            <button class="btn btn-default" ng-click="connectAll()">Connect All</button>
        </div>



        <div ng-switch="view.queryGenerator.type">

            <node-filter ng-switch-when="nodeFilter" generated="generatedQuery.q" options="view.queryGenerator.options" nodechanged="nodeChanged(node)"></node-filter>
            <node-graph ng-switch-when="nodeGraph" generated="generatedQuery.q" options="view.queryGenerator.options" nodechanged="nodeChanged(node)"></node-graph>
            <favourites-filter ng-switch-when="favouritesFilter" generated="generatedQuery.q" options="view.queryGenerator.options"></favourites-filter>

        </div>

    </div>

</div>
