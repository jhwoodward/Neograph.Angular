<div ng-form name="nodeForm" >
  
  <div class="clearfix header-container">
    <div class="pull-left header">
      {{vm.node.isPicture() ? vm.node.title: vm.node.label | startcase}}
    </div>
    <div class="pull-right" ng-if="!vm.editing">
      <div ng-if="!vm.node.isDeleted()">
        <button class="btn ion-edit"  ng-click="vm.edit()"></button>
        <button class="btn btn-delete ion-trash-a" ng-click="vm.delete()"></button>
      </div>
      <div ng-if="vm.node.isDeleted()" >
        <button class="btn btn-success" ng-click="vm.restore()">Restore</button>
        <button class="btn btn-danger" ng-click="vm.destroy()">Destroy</button>
      </div>
    </div>

    <div class="pull-right"  ng-if="vm.editing" >

      <button class="btn ion-checkmark-round" ng-click="vm.save()" 
        ng-disabled="nodeForm.$invalid"
        ng-class="{'disabled':nodeForm.$invalid}"
      ></button>

      <button class="btn pull-right ion-close-round" ng-click="vm.cancel()"></button>
    </div>
  </div>
  
  <div class="tabbable propertyTabs">
    <ul class="nav nav-tabs">
        <li ng-repeat="tab in vm.tabs" ng-class="{active:vm.selectedTab===tab}">
            <a href ng-click="vm.selectTab(tab)"><span class="hidden-xs">{{tab}}</span><span class="visible-xs">{{tab.charAt(0)}}</span></a>
        </li>
    </ul>

    <div class="tab-pane" 
      ng-repeat="tab in vm.tabs" 
      ng-switch="tab" 
      ng-show="vm.selectedTab === tab">

      <div class="tab-content" ng-switch-when="Properties"  >
        <node-properties node="vm.node" editing="vm.editing" />
      </div>

      <div class="tab-content" ng-switch-when="Image"  >
        <node-image node="vm.node" />
      </div>

      <div class="tab-content" ng-switch-when="Relationships">
        <node-relationships node="vm.node"  editing="vm.editing"  />
      </div>

      <div class="tab-content" ng-switch-when="References">
        <node-references node="vm.node"  editing="vm.editing"  />
      </div>

    </div>
  </div>
</div>
